// Dummy international flights
const flights = [
  {from:"Cape Town", to:"London", airline:"British Airways", stops:1, depart:"22:00", arrive:"10:00+1", duration:"12h", price:423, logo:"https://content.airlinelogos.com/airlines/ba.png"},
  {from:"Johannesburg", to:"New York", airline:"Emirates", stops:1, depart:"20:00", arrive:"06:00+1", duration:"15h", price:845, logo:"https://content.airlinelogos.com/airlines/emirates.png"},
  {from:"Cape Town", to:"Dubai", airline:"Emirates", stops:0, depart:"16:00", arrive:"00:00+1", duration:"8h", price:503, logo:"https://content.airlinelogos.com/airlines/emirates.png"},
  {from:"Durban", to:"London", airline:"British Airways", stops:1, depart:"21:00", arrive:"09:00+1", duration:"12h", price:436, logo:"https://content.airlinelogos.com/airlines/ba.png"},
  {from:"Cape Town", to:"New York", airline:"Emirates", stops:1, depart:"19:00", arrive:"05:00+1", duration:"15h", price:862, logo:"https://content.airlinelogos.com/airlines/emirates.png"}
];

const resultsContainer = document.getElementById('results');

// Render flights
function renderFlights(data) {
  resultsContainer.innerHTML = '';
  data.forEach(f => {
    const card = document.createElement('div');
    card.className = 'flight-card';
    card.innerHTML = `
      <div class="flight-header">
        <img src="${f.logo}" alt="${f.airline}" class="airline-logo">
        <div class="airline-details">
          <strong>${f.airline}</strong>
          <small>${f.stops===0 ? "Non-stop" : f.stops + " Stop(s)"}</small>
        </div>
        <div class="flight-times">
          <span>${f.depart} â†’ ${f.arrive}</span>
          <span>${f.duration}</span>
        </div>
        <div class="flight-price">
          <span>$${f.price}</span>
        </div>
      </div>
      <button class="select-btn">Select</button>
    `;
    resultsContainer.appendChild(card);
  });
}

// Initial render
renderFlights(flights);

// Search functionality
document.getElementById('flight-search-form').addEventListener('submit', e => {
  e.preventDefault();
  const from = document.getElementById('from').value.toLowerCase();
  const to = document.getElementById('to').value.toLowerCase();
  const directOnly = document.getElementById('direct').checked;

  let filtered = flights.filter(f => f.from.toLowerCase().includes(from) && f.to.toLowerCase().includes(to));
  if(directOnly) filtered = filtered.filter(f => f.stops === 0);

  renderFlights(filtered);
});

// Filters buttons
document.querySelectorAll('.filter').forEach(btn => {
  btn.addEventListener('click', () => {
    const type = btn.dataset.filter;
    document.querySelectorAll('.filter').forEach(f => f.classList.remove('active'));
    btn.classList.add('active');

    let filtered = flights.slice();
    if(type === 'direct') filtered = flights.filter(f => f.stops === 0);
    if(type === '1stop') filtered = flights.filter(f => f.stops === 1);
    if(type === 'cheapest') filtered.sort((a,b)=>a.price-b.price);
    if(type === 'shortest') filtered.sort((a,b)=>{
      return parseInt(a.duration) - parseInt(b.duration);
    });
    renderFlights(filtered);
  });
});
