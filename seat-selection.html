<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Select Seats — International Booking</title>
<link rel="stylesheet" href="css/booking.css">
<style>
  /* Flight summary */
  .flight-summary {
    display:flex; justify-content:space-between; background:#f5f5f5; padding:16px; border-radius:8px; margin-bottom:20px;
  }
  .flight-summary div {display:flex; flex-direction:column;}
  .flight-summary .airline-logo {width:80px; height:auto;}
  .flight-summary .price {font-weight:700; font-size:22px; margin-top:8px;}

  /* Seat map */
  .seat-map {display:grid; grid-template-columns: repeat(6, 40px); gap:8px; justify-content:center; margin-bottom:20px;}
  .seat {width:40px; height:40px; background:#e0e0e0; border-radius:6px; cursor:pointer; display:flex; align-items:center; justify-content:center;}
  .seat.selected {background:#f5a623; color:#fff; font-weight:700;}
  .seat.occupied {background:#ccc; cursor:not-allowed;}

  /* Form */
  .passenger-form {margin-bottom:20px;}
  .passenger-form label {display:block; margin-bottom:4px; font-weight:600;}
  .passenger-form input {width:100%; padding:8px; margin-bottom:12px; border-radius:6px; border:1px solid #ccc;}
  
  .btn-primary {background:#f5a623; color:#fff; border:none; padding:12px 20px; font-weight:700; border-radius:6px; cursor:pointer;}
</style>
</head>
<body>
<header>
  <img src="img/booking-logo.png" alt="Booking.com Logo" class="logo">
</header>

<main class="main-container">
  <a href="flights.html">&larr; Back to search</a>

  <div class="flight-summary">
    <div>
      <img id="airlineLogo" src="" class="airline-logo">
      <span id="airlineName"></span>
      <span id="route"></span>
      <span id="duration"></span>
    </div>
    <div>
      <span class="price" id="price"></span>
      <span>per passenger</span>
    </div>
  </div>

  <h3>Select your seats</h3>
  <div class="seat-map" id="seatMap"></div>

  <h3>Passenger details</h3>
  <form id="passengerForm" class="passenger-form">
    <label for="firstName">First Name</label>
    <input id="firstName" type="text" required>
    <label for="lastName">Last Name</label>
    <input id="lastName" type="text" required>
    <label for="email">Email</label>
    <input id="email" type="email" required>
    <label for="phone">Phone</label>
    <input id="phone" type="tel" required>
    <button type="submit" class="btn-primary">Continue to Payment</button>
  </form>
</main>

<footer>
  <img src="img/booking-logo.png" alt="Booking.com Logo">
  <p>&copy; 2025 International Booking™</p>
</footer>

<script>
(function(){
  const params = new URLSearchParams(location.search);
  const fid = params.get('flight');
  const STORAGE_KEY = 'booking_mirror_flights';
  const flights = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
  const flight = flights.find(f=>f.id==fid);

  if(!flight){
    document.querySelector('.main-container').innerHTML = '<p>Flight not found. Go back to search.</p>';
    return;
  }

  // Flight summary
  document.getElementById('airlineLogo').src = flight.logo;
  document.getElementById('airlineName').textContent = flight.airline;
  document.getElementById('route').textContent = `${flight.from} → ${flight.to}`;
  document.getElementById('duration').textContent = flight.duration;
  document.getElementById('price').textContent = 'ZAR ' + flight.price.toLocaleString();

  // Generate seat map (6 columns, 10 rows)
  const seatMap = document.getElementById('seatMap');
  const rows = 10;
  const cols = 6;
  const occupiedSeats = [2,5,11,17,23,30]; // dummy occupied
  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      const seatNumber = r*cols + c + 1;
      const seat = document.createElement('div');
      seat.className = 'seat';
      seat.textContent = seatNumber;
      if(occupiedSeats.includes(seatNumber)) seat.classList.add('occupied');
      seat.addEventListener('click',()=>{
        if(seat.classList.contains('occupied')) return;
        seatMap.querySelectorAll('.seat.
