<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Choose Seats — GoGlobal</title>
<link rel="stylesheet" href="flights.css">
</head>
<body>
  <header class="gg-header">
    <div class="container header-inner">
      <a class="logo" href="index.html">Go-Global Recruitment</a>
    </div>
  </header>
  <main class="container" style="padding-top:28px">
    <h2>Select your seat(s)</h2>
    <div id="bookingSummary"></div>

    <div id="seatMap" style="margin-top:14px">
      <!-- JS will build the seat map -->
    </div>

    <div style="margin-top:16px">
      <button id="toPayment" class="btn primary">Proceed to payment</button>
    </div>
  </main>

<script>
const booking = JSON.parse(sessionStorage.getItem('gg_booking') || 'null');
if (!booking) {
  alert('No booking selected. Returning to flights.');
  location.href = 'flights.html';
}
document.getElementById('bookingSummary').innerHTML = `<strong>${booking.airline}</strong> ${booking.origin} → ${booking.dest} • ZAR ${Number(booking.price).toLocaleString()}`;

function makeSeatMap(rows=6, cols=6){
  const map = document.getElementById('seatMap');
  map.innerHTML = '';
  for(let r=0;r<rows;r++){
    const row = document.createElement('div');
    row.style.display='flex';row.style.gap='8px';row.style.margin='6px 0';
    for(let c=0;c<cols;c++){
      const seat = document.createElement('button');
      const id = String.fromCharCode(65+r)+ (c+1);
      seat.textContent = id;
      seat.className='btn';
      seat.style.minWidth='52px';
      seat.onclick = ()=> {
        seat.classList.toggle('selected');
      };
      row.appendChild(seat);
    }
    map.appendChild(row);
  }
}
makeSeatMap();

document.getElementById('toPayment').addEventListener('click', ()=>{
  // collect selected seats
  const selected = Array.from(document.querySelectorAll('#seatMap .selected')).map(s=>s.textContent);
  booking.seats = selected;
  sessionStorage.setItem('gg_booking', JSON.stringify(booking));
  location.href = 'payment.html';
});
</script>
</body>
</html>
