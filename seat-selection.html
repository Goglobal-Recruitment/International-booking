<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Select Seats â€” Booking.com Clone</title>
<link rel="stylesheet" href="css/seats.css">
<style>
body{font-family:Arial,Helvetica,sans-serif;margin:0;padding:0;background:#f5f5f5;color:#222}
.container{max-width:1000px;margin:24px auto;padding:16px;background:#fff;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;}
.header h2{margin:0;font-size:24px;}
.seat-map{display:grid;grid-template-columns:repeat(6,1fr);gap:8px;margin:16px 0;}
.seat{width:40px;height:40px;background:#eee;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;}
.seat.selected{background:#f5a623;color:#fff;font-weight:700;}
.seat.occupied{background:#ccc;cursor:not-allowed;}
.actions{text-align:right;}
.actions button{padding:10px 16px;border:none;border-radius:6px;background:#f5a623;color:#fff;font-weight:700;cursor:pointer;}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h2>Select Your Seats</h2>
    <a href="flights.html">&larr; Back to flights</a>
  </div>
  <div id="seatMap" class="seat-map"></div>
  <div class="actions">
    <button id="confirmSeats">Confirm Seats & Continue</button>
  </div>
</div>

<script>
// Load selected flight
const flight = JSON.parse(localStorage.getItem("selectedFlight"));
if(!flight){
  alert("No flight selected! Redirecting to search.");
  window.location.href="flights.html";
}

// Generate seat map
const seatMapEl = document.getElementById("seatMap");
const rows = 10;
const cols = 6; // A-F
const occupiedSeats = ["1A","1B","2C","3D","5E"]; // dummy occupied

let selectedSeats = [];

function renderSeats(){
  seatMapEl.innerHTML="";
  for(let r=1;r<=rows;r++){
    for(let c=0;c<cols;c++){
      const seatLabel = r + String.fromCharCode(65+c);
      const seatEl = document.createElement("div");
      seatEl.className="seat";
      seatEl.textContent=seatLabel;
      if(occupiedSeats.includes(seatLabel)) seatEl.classList.add("occupied");
      if(selectedSeats.includes(seatLabel)) seatEl.classList.add("selected");
      seatEl.addEventListener("click",()=>{
        if(seatEl.classList.contains("occupied")) return;
        if(selectedSeats.includes(seatLabel)){
          selectedSeats = selectedSeats.filter(s=>s!==seatLabel);
        } else {
          selectedSeats.push(seatLabel);
        }
        renderSeats();
      });
      seatMapEl.appendChild(seatEl);
    }
  }
}

renderSeats();

// Confirm seats
document.getElementById("confirmSeats").addEventListener("click",()=>{
  if(selectedSeats.length===0){
    alert("Please select at least one seat.");
    return;
  }
  flight.selectedSeats = selectedSeats;
  localStorage.setItem("selectedFlight", JSON.stringify(flight));
  window.location.href="booking-confirmation.html";
});
</script>
</body>
</html>
